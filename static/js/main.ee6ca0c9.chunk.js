(this["webpackJsonpsync-lyrics"]=this["webpackJsonpsync-lyrics"]||[]).push([[0],{11:function(e,t,n){e.exports=n(20)},16:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(8),l=n.n(c),o=(n(16),n(1)),i=n(3),u=n(10);function s(e){var t=Object(r.useCallback)((function(t){t.forEach((function(t){var n=new FileReader;n.onerror=function(){return console.log("fail on file reading")},n.onload=function(t){var n=document.getElementById("audio-player");n&&n.remove();var r=t.target.result,a=document.createElement("audio"),c=document.createElement("source");a.id="audio-player",a.controls="controls",c.src=r,a.type="audio/mpeg",a.appendChild(c),document.getElementById("song").appendChild(a);var l=new Event("songLoaded");window.dispatchEvent(l),e.process("song",!0)},n.readAsDataURL(t)}))}),[]),n=Object(u.a)({onDrop:t}),c=n.acceptedFiles,l=n.getRootProps,o=n.getInputProps,i=(n.isDragActive,c.map((function(e){return a.a.createElement("li",{key:e.path},e.path," - ",e.size," bytes")})));return a.a.createElement("div",{className:"container"},a.a.createElement("label",null,"UPLOAD MP3 FILE"),a.a.createElement("div",l({className:"dropzone"}),a.a.createElement("input",o()),a.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")),a.a.createElement("aside",null,a.a.createElement("h4",null,"Files"),a.a.createElement("ul",null,i)))}function d(e){var t=Object(r.useState)({value:""}),n=Object(i.a)(t,2),c=n[0],l=n[1];return a.a.createElement("div",{className:"container"},a.a.createElement("label",null,"ENTER YOUR LYRICS"),a.a.createElement("div",{className:"lyricsArea"},a.a.createElement("textarea",{placeholder:"Paste your lyrics here",value:c.value,onChange:function(t){var n=t.target.value;l({value:n}),e.process("lyrics",n.replace(/[\r\n]{2,}/g,"\n"))}})))}function m(e){var t=Object(r.useState)(e.screen),n=Object(i.a)(t,2),c=(n[0],n[1],Object(r.useState)({dragDrop:!0,lyrics:!0})),l=Object(i.a)(c,2),u=l[0],m=l[1],f=function(t,n){"song"===t?m((function(e){return Object(o.a)(Object(o.a)({},e),{},{dragDrop:!n})})):"lyrics"===t&&(m((function(e){return Object(o.a)(Object(o.a)({},e),{},{lyrics:!Boolean(n&&""!==n.trim)})})),e.data(n.trim()))};return a.a.createElement("section",{className:"screen screen1 active"+e.screen},a.a.createElement("header",null,"Let's start syncing your lyrics"),a.a.createElement(s,{process:f}),a.a.createElement(d,{process:f}),a.a.createElement("footer",null,a.a.createElement("button",{disabled:u.lyrics||u.dragDrop,onClick:function(t){return n=2,void e.change(n);var n}},"LET'S START")))}var f=n(6);function b(e){var t=function(e){return e.split("\n").map((function(e,t){return{order:t+1,text:e,start:"",end:"",startSrt:"",endSrt:""}}))},n=function(e){return new Date(1e3*e).toISOString().substr(11,12).replace(".",",")},c=function(e){return e&&void 0!==typeof e?new Date(1e3*e).toISOString().substr(11,8):""},l=function(e){var t=e.split(":");return 3600*+t[0]+60*+t[1]+ +t[2]};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!!e})).join(" ")}var s=Object(r.useState)({currentIndex:0,lines:t(e.lyrics)}),d=Object(i.a)(s,2),m=d[0],b=d[1],E=Object(r.useState)(1),v=Object(i.a)(E,2),p=v[0],y=v[1],O="";var g=function(e,t){var n=e.target.value,r=e.target.name;b((function(e){var a=Object(f.a)(e.lines);return"start"==r?a[t]=Object(o.a)(Object(o.a)({},a[t]),{},{start:n}):"end"==r&&(a[t]=Object(o.a)(Object(o.a)({},a[t]),{},{end:n})),Object(o.a)(Object(o.a)({},e),{},{lines:a})}))},j=Object(r.useCallback)((function(t){var r=document.getElementById("audio-player");if(1===e.screen)return!1;if(32==t.keyCode){if(t.stopPropagation(),t.preventDefault(),r&&0==r.currentTime)return O="Please start the record",alert("Please start the record"),0;b((function(e){var t=Object(f.a)(e.lines),a=t.findIndex((function(t){return t.order==e.currentIndex+1}));return a<0?(!0,e):(t[a]=Object(o.a)(Object(o.a)({},t[a]),{},{start:c(r.currentTime),startSrt:n(r.currentTime)}),Object(o.a)(Object(o.a)({},e),{},{lines:t,currentIndex:e.currentIndex+1}))}))}else if(13==t.keyCode){if(r&&0==r.currentTime)return O="Please start the record",alert("please start the record"),0;b((function(e){var t=Object(f.a)(e.lines),a=t.findIndex((function(t){return t.order==e.currentIndex}));return t[a]=Object(o.a)(Object(o.a)({},t[a]),{},{end:c(r.currentTime),endSrt:n(r.currentTime)}),Object(o.a)(Object(o.a)({},e),{},{lines:t})}))}else 37==t.keyCode?(console.log(m),b((function(e){if(1!==e.currentIndex){var t=e.lines[e.currentIndex-2].start;return t&&(r.currentTime=l(t)-1),Object(o.a)(Object(o.a)({},e),{},{currentIndex:e.currentIndex-1})}return Object(o.a)({},e)}))):39==t.keyCode&&b((function(e){if(e.currentIndex!==e.lines.length){console.log(e);var t=e.lines[e.currentIndex].start;return t&&(r.currentTime=l(t)-1),Object(o.a)(Object(o.a)({},e),{},{currentIndex:e.currentIndex+1})}return Object(o.a)({},e)}))}),[e.screen]);return Object(r.useEffect)((function(){e.screen;var n=document.getElementById("audio-player");return n&&(n.pause(),n.currentTime=0),b((function(n){return Object(o.a)(Object(o.a)({},n),{},{lines:t(e.lyrics),currentIndex:0})})),window.addEventListener("songLoaded",(function(){(n=document.getElementById("audio-player")).addEventListener("play",(function(){n.blur()})),n.addEventListener("pause",(function(){n.blur()}))}),!1),window.addEventListener("keydown",j),function(){window.removeEventListener("keydown",j)}}),[e.screen,j]),a.a.createElement("section",{className:"screen screen2 active"+e.screen},a.a.createElement("header",null,"Sync your lyrics"),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"lyricsArea"},a.a.createElement("ul",null,m.lines.map((function(e,t){return a.a.createElement("li",{key:t,className:u(m.currentIndex==Number(t+1)&&"active","line-"+Number(t+1),e.start&&e.end&&"done")},a.a.createElement("i",null,t+1),a.a.createElement("a",null,e.text),a.a.createElement("input",{name:"start",value:e.start,onChange:function(e){return g(e,t)}}),a.a.createElement("input",{name:"end",value:e.end,onChange:function(e){return g(e,t)}}))}))))),a.a.createElement("div",{className:"container"},a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){document.getElementById("audio-player").play()}},"PLAY"),a.a.createElement("button",{onClick:function(){document.getElementById("audio-player").pause()}},"PAUSE"),a.a.createElement("div",{id:"song"})),a.a.createElement("div",null,a.a.createElement("div",{className:"rangeContainer"},a.a.createElement("label",null,"PLAYBACK RATE (",Number(p).toFixed(2),")"),a.a.createElement("input",{id:"pbr",type:"range",min:"0.25",max:"1.75",step:"0.25",value:p,onChange:function(e){document.getElementById("audio-player").playbackRate=e.target.value,y(e.target.value)}}))),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(t){return n=1,e.change(n);var n}},"HOMEPAGE"),a.a.createElement("button",{onClick:function(){if(m.lines.filter((function(e,t){return""===e.start.trim()||""===e.end.trim()})).length)alert("Please fill the empty cells");else{var e="0\n00:00:00,000 --\x3e 00:00:01,000\nGenerated by: Lyrics Sync";m.lines.forEach((function(t,n){e+="\n\n".concat(1+n,"\n").concat(t.startSrt?t.startSrt:t.start+",000"," --\x3e ").concat(t.endSrt?t.endSrt:t.end+",000","\n").concat(t.text)})),function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}("subtitle.srt",e)}}},"DOWNLOAD SRT"),a.a.createElement("label",null,O))))}n(19);var E=function(){var e=Object(r.useState)({screenNo:1}),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(""),u=Object(i.a)(l,2),s=u[0],d=u[1],f=n.screenNo,E=function(e){return c((function(t){return Object(o.a)(Object(o.a)({},t),{},{screenNo:e})}))};return a.a.createElement("div",{className:"App"},a.a.createElement(m,{screen:f,change:E,data:function(e){d(e)}}),a.a.createElement(b,{lyrics:s,screen:f,change:E}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.ee6ca0c9.chunk.js.map